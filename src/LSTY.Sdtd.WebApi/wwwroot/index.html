<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<!-- import CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.15.7/theme-chalk/index.min.css" />
	<style>
		body {
			width: 100vw;
			height: 100vh;
			margin: 0;
		}

		#app {
			width: 100%;
			height: 100%;
		}

		.el-container {
			width: 100%;
			height: 100%;
		}

		.el-aside {
			background-color: rgb(0, 21, 41);
		}

		iframe {
			border: none;
			height: 100%;
			width: 100%;
		}

		.el-tab-pane {
			height: calc(100vh - 216px);
		}

		.el-main {
			padding-right: 2px;
		}
	</style>
</head>

<body>
	<div id="app">
		<el-container>
			<el-aside width="210px">Aside</el-aside>
			<el-container>
				<el-header height="48px">Header</el-header>
				<el-main>
					<el-tabs v-model="selectedTab" type="card" closable @tab-remove="removeTab">
						<el-tab-pane v-for="(item, index) in tabPanes" :key="index" :label="item.title"
							:name="item.name">
							<iframe :src="item.url"></iframe>
						</el-tab-pane>
					</el-tabs>
				</el-main>
				<el-footer height="72px">Footer</el-footer>
			</el-container>
		</el-container>
	</div>
</body>
<!-- import Vue before Element -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.14/vue.min.js"></script>
<!-- import JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.15.7/index.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
<script src="/js/global.js"></script>
<script>
	const rootIns = new Vue({
		el: "#app",
		data() {
			return {
				baseUrl: 'http://localhost:8089/api',
				accessToken: null,
				selectedTab: '1',
				tabPanes: [{
					name: '1',
					title: '控制台',
					url: '/webcontrol/console.html'
				}, {
					name: '2',
					title: '在线玩家',
					url: '/webcontrol/liveplayers.html'
				}, {
					name: '3',
					title: '接口文档',
					url: '/api/swagger/index.html'
				}],

			};
		},
		created() {
			axios.defaults.baseURL = this.baseUrl;
			if (!!this.accessToken) {
				axios.defaults.headers.common['access-token'] = this.accessToken;
			}
			axios.get('/ServerManage/LivePlayers/123').then((data) => { console.log(data); });
		},
		methods: {
			addTab(targetName) {
				// let newTabName = ++this.tabIndex + '';
				// this.tabPanes.push({
				//     title: 'New Tab',
				//     name: newTabName,
				//     content: 'New Tab content'
				// });
				// this.selectedTab = newTabName;
			},
			removeTab(targetName) {
				// let tabs = this.tabPanes;
				// let activeName = this.selectedTab;
				// if (activeName === targetName) {
				//     tabs.forEach((tab, index) => {
				//         if (tab.name === targetName) {
				//             let nextTab = tabs[index + 1] || tabs[index - 1];
				//             if (nextTab) {
				//                 activeName = nextTab.name;
				//             }
				//         }
				//     });
				// }

				// this.selectedTab = activeName;
				// this.tabPanes = tabs.filter(tab => tab.name !== targetName);
			}
		},
	});
</script>

</html>